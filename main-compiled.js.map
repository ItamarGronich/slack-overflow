{"version":3,"sources":["main.js"],"names":[],"mappings":"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","file":"main-compiled.js","sourcesContent":["var btnRefresh = document.querySelector('#refresh'),\n    btnPost = document.querySelector('#post'),\n    btnDelete = document.querySelector('#delete'),\n    btnChange = document.querySelector('#change'),\n    DONE = 4,\n    OK = 200,\n    msgArray; // variable will be assigned with all messages elements\n\n// disables form default validation mechanisms.\nfunction validateMyForm(){\n    return false;\n}\n\n\n/**\n * AJAX Request function with callback and optional request headers.\n * @param request      - type of request. accepts 'GET', 'POST', 'PUT' & 'DELETE'\n *\n * @param url          - path on the server:\n *                       GET    = https://hidden-headland-7200.herokuapp.com/\n *                       POST   = https://hidden-headland-7200.herokuapp.com/new/\n *                       PUT    = https://hidden-headland-7200.herokuapp.com/edit/<_id-number-here>\n *                       DELETE = https://hidden-headland-7200.herokuapp.com/delete/<_id-number-here>\n *\n * @param callback     - function to execute on readyState === 4 (DONE).\n *\n * @param body         - the body of the request. accepts empty, null and JSON string.\n *       (optional)\n *\n * @param headers      - request headers. if needed, syntax is a single string separated\n *       (optional)      by a colon ':'. In example - <code>'Content-Type:application/json'</code>\n *                       multiple request headers is handled with array of same syntaxed strings.\n *\n * @param responseType - a string of expected response types. can be left blank defaults to 'json'\n *       (optional)\n */\nfunction ajax(request, url, callback, body, headers, responseType){\n    // 7nth param is the onclick event.\n    // stops it from bubbling to the <form>\n    arguments[6].stopPropagation();\n\n    var xhr  = new XMLHttpRequest(),\n        args;\n\n    // open request\n    xhr.open(request, url);\n\n    // set request headers based on typeof headers.\n    //if headers is a string. This means that there's only one request header to set\n    if ( typeof headers === 'string' && !!headers){\n        //split strings into arguments array. always a length of 2.\n        args = headers.split(':');\n\n        // set headers based on the array.\n        xhr.setRequestHeader(args[0], args[1]);\n    }\n\n    // if headers is an array. This means that there's more than one request header to set\n    else if( headers instanceof Array ){\n\n        // loop over all setRequestHeader arguments\n        headers.forEach(function(el){\n            if (typeof el === 'string'){\n\n                //split every arument to an aray of the two arguments required for setRequestHeader\n                args = el.split(\":\");\n\n                // evoke setRequestHeader for each of the arguments supplied.\n                xhr.setRequestHeader(args[0], args[1]);\n        }});\n\n    }\n\n    // setting expected response type. defaults to 'json'\n    xhr.responseType = responseType || 'json';\n\n    xhr.onreadystatechange = function(){\n\n        // if DONE and OK\n        if(xhr.readyState === DONE && xhr.status === OK){\n            if (xhr.response !== null){\n                console.log(xhr.response.message || \"no response\");\n            }\n            callback(xhr); // evoke callback with xhr object as first argument.\n\n        // if DONE but not OK\n        } else if (xhr.readyState === DONE && xhr.status !== OK){\n            console.log('bad request');\n        }\n    };\n\n    // sends the request.\n    // if body exists and or it's a null => send request with specified body\n    // else send request with no body\n    body || body === null ? xhr.send(body) : xhr.send();\n\n    console.log('request ' + request + ' has been sent');\n}\n\n\n// edd event listeners only when DOM is loaded and parsed\ndocument.addEventListener('DOMContentLoaded', function(){\n    console.log('DOM fully loaded and parsed');\n\n/*\n * ================================================================================================================\n *                                           Refresh button event\n * ================================================================================================================\n * */\n    // arrow function is to prevent ajax(); from firing until event dispatches\n    // also, an 'event' parameter is sent with the arrow function and is passed as the\n    // last argument to ajax(); function.\n    btnRefresh.onclick = event => {ajax('GET', 'https://hidden-headland-7200.herokuapp.com/', function(xhr){\n        // the json object with\n        // an array of object messages\n        var messages = xhr.response,\n\n            // string that will later be concatenated into the\n            // innerHTML.\n            string = '',\n\n            // caching the <section class=\"msgBoard\"> tag.\n            msgBoard = document.querySelector('.msgBoard');\n\n        // looping over all the message objects\n        for (var i = 0; i < messages.length; i++){\n            string += '<article class=\"msg\"><h1>' + messages[i].name + '</h1><p data-layout=\"hide\"> ID:' + messages[i]._id + '</p><p>' + messages[i].message + '</p></article>';\n        }\n\n        // assigning messages to msgBoard\n        msgBoard.innerHTML = string;\n\n        //after all messages pushed to DOM - select all in array like.\n        msgArray = document.querySelectorAll('.msg');\n\n        parseEventListeners();\n\n    },'','','',event)};\n\n\n/*\n* ================================================================================================================\n*                                           Post button event\n* ================================================================================================================\n* */\n\n    btnPost.onclick = event => {ajax('POST', 'https://hidden-headland-7200.herokuapp.com/new', function(xhr){\n        var feedback = xhr.response !== null ? xhr.response.message : \"no response\";\n        console.log(\"message status: \" + feedback);\n\n        // upon success simulates click event on refresh button to load new posts\n        btnRefresh.click();\n\n        //body argument                                                    headers argument   responseType argument\n    },'{\"message\":\"'+ msgBody.value + '\",\"name\":\"' + usrName.value +'\"}','Content-Type:application/json','json',event)};\n\n\n/*\n* ================================================================================================================\n*                                           Delete button event\n* ================================================================================================================\n* */\n\n    btnDelete.onclick = event => {ajax('DELETE', ('https://hidden-headland-7200.herokuapp.com/delete/' + msgId.value), function(xhr){\n        var feedback = xhr.response !== null ? xhr.response.message : \"no response\";\n        console.log(\"message status: \" + feedback);\n        btnRefresh.click();\n\n    },'','Content-Type:application/json','json',event)};\n\n\n/*\n* ================================================================================================================\n*                                           Edit button event\n* ================================================================================================================\n* */\n\n    btnChange.onclick = event => {ajax('PUT', ('https://hidden-headland-7200.herokuapp.com/edit/' + msgId.value), function(xhr){\n        var feedback = xhr.response !== null ? xhr.response.message : \"no response\";\n        console.log(\"message status: \" + feedback);\n        btnRefresh.click();\n\n    },'{\"message\":\"'+ msgBody.value + '\",\"name\":\"' + usrName.value +'\"}','Content-Type:application/json','json',event)};\n\n\n\n\n});\n\n/*\n * ================================================================================================================\n *                                           Click editing Utility\n * ================================================================================================================\n * */\n\nfunction parseEventListeners() {\n// assign all present messaged with an event listener\n    for (var j = 0; j < msgArray.length; j++) {\n        msgArray[j].addEventListener('click', function () {\n\n\n\n            //and assign the clicked element with a selected state.\n            // if it has one already remove the attribute.\n            if (this.hasAttribute('data-state')) {\n                this.removeAttribute('data-state');\n            } else {\n                //when clicked remove all selected states\n                for (var i = 0; i < msgArray.length; i++) {\n                    msgArray[i].removeAttribute('data-state');\n                }\n                // assign the clicked element with a selected state.\n                this.setAttribute('data-state', 'selected');\n            }\n\n\n            // insert the id value of current selected message to the msgId input field\n            msgId.value = this.childNodes[1].textContent.slice(4);\n\n            // if an article is currently selected - unhide edit button\n            if (this.hasAttribute('data-state')) {\n                btnChange.setAttribute('data-state', 'selected');\n            } else {  // if it isn't hide it\n                btnChange.removeAttribute('data-state');\n            }\n\n            // exactly the same for the delete button\n            if (this.hasAttribute('data-state')) {\n                btnDelete.setAttribute('data-state', 'selected');\n            } else {\n                btnDelete.removeAttribute('data-state');\n            }\n\n\n        });\n    }\n}\n\n/*\n*============================================= END OF EDITING UTIL =====================================\n* */\n\n\n// fire refresh when page is fully loaded.\nwindow.addEventListener('load', function(){\n    console.log('page finished loading');\n    btnRefresh.click();\n});\n"]}